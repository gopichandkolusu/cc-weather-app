angular.module("myApp",["ui.router","ngGeolocation","ngProgress","ui.router.title","jtt_openweathermap","ngMap"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(o,e,t){o.state("home",{url:"/",templateUrl:"home/home.html",controller:"HomeController",meta:{title:"Homepage",description:"Your Favorite Programming Languages, Side By Side"}}),e.otherwise("/"),t.html5Mode(!0)}]).run(["$rootScope","$state","$location","ngProgressFactory",function(o,e,t,n){var i=n.createInstance();o.$on("$stateChangeStart",function(o,e,t,n,a){i.start()}),o.$on("$stateChangeSuccess",function(){o.title=e.current.meta.title,o.description=e.current.meta.description,i.complete()})}]),angular.module("myApp").controller("HomeController",["$scope","$geolocation","openweathermapFactory","$http",function(o,e,t,n){o.userDenied=!1,o.loading=!1,o.location={},o.requestCity=function(){o.loading=!0,console.log(o.location),t.getWeatherFromCitySearchByName({q:o.location.name,appid:"95fce1ea5c2190183b85f3e518de44cd"}).then(function(e){o.loading=!1,o.position=e,console.log(e),o.positionReady=!0}).catch(function(o){console.log(o),toastr.error("Could not complete task","Some error happened. See console for details")})},o.requestCoord=function(){o.loading=!0,console.log(o.location),doWeather(o.location),o.positionReady=!0},doWeather=function(e){o.loading=!0,toastr.info("Going to fetch report","Hold on tight!"),t.getWeatherFromLocationByCoordinates({lat:e.coords.latitude,lon:e.coords.longitude,appid:"95fce1ea5c2190183b85f3e518de44cd"}).then(function(e){o.loading=!1,o.position=e,console.log(e),toastr.info("Weather report is ready")}).catch(function(o){console.log(o),toastr.error("Could not complete task","Some error happened. See console for details")})},e.getCurrentPosition({timeout:6e3}).then(function(e){o.position=e,console.log(e),o.positionReady=!0,doWeather(e)}).catch(function(e){console.log(e),o.userDenied=!0,toastr.error("You denied access to Geolocation. Switching to manual mode.","No location available"),n.get("./assets/city.list.json").then(function(e){o.cities=e.data,toastr.info("List of cities finished loading","Cities are loaded.")}).catch(function(o){toastr.error("Could not complete task","Some error happened. See console for details"),console.log(o)})})}]),$(document).foundation(),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};